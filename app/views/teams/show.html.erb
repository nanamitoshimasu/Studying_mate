<div class="items-center min-h-screen bg-base-100">
  <div class="max-w-7xl mx-auto grid grid-cols-2 gap-6 items-start">
    <div class="card bg-base-200 shadow-xl my-12">
      <div class="card-body">
        <figure>
          <%= image_tag @team.thumbnail.url, size: '640x427', class: 'rounded-md' =%>  
        </figure>
        <h2 class="card-title"><%= @team.title %> </h2>
        <hr class="my-5">
        <div>
          <h3 class="mb-0 text-lg font-semibold text-gray-700" ><%= t(Team.human_attribute_name(:target_time)) %></h3>
          <p class="mb-4">
            <%= @team.target_time %> 時間
          </p>
        </div>
        <div>
          <p class="font-semibold">救う絶滅危惧種</p>
          <%= image_tag @team.image_for_time, class: 'w-24 h-24 rounded-full object-cover'%>
        </div>
        <div>
          <h3 class="mb-0 text-lg font-semibold text-gray-700" ><%= t(Team.human_attribute_name(:capacity)) %></h3>
          <p class="mb-4">
            <%= @team.capacity %> 人
          </p>
        </div>
        <div>
          <h3 class="mb-0 text-lg font-semibold text-gray-700" ><%= t'.term' %></h3>
          <p class="mb-4">
            <%= l @team.start_date, format: :short %>~<%= l @team.end_date, format: :short%>
          </p>
        </div>
        <div>
          <h3 class="mb-0 text-lg font-semibold text-gray-700">募集期限</h3>
          <%= l @team.deadline, format: :default %>
        </div>
        <div>
          <h3 class="mb-0 text-lg font-semibold text-gray-700" ><%= t(Team.human_attribute_name(:description)) %></h3>
          <p class="mb-4">
            <%= @team.description %>
          </p>
        </div>
        <div class="card-actions justify-end">
          <% if logged_in? %>
            <% if !current_user.owner?(@team) %>
              <% if @team.status == "wanted" %> 
                <% @active_team = current_user.attend_teams.where('start_date <= ? AND end_date >= ?', Time.current, Time.current).order(:end_date).last %>
                <% if @active_team.blank? %>
                  <% if current_user.attend?(@team) %>
                    <%= link_to 'キャンセルする',
                                team_attendance_path(@team),
                                 class: 'btn btn-primary',
                                 data: { turbo_method: :delete, turbo_confirm: '本当にキャンセル？' } %>
                  <% else %>
                    <%= link_to '仲間になる',
                                team_attendance_path(@team),
                                class: 'btn btn-accent',
                                data: { "turbo-method": :post } %>
                  <% end %>
                <% end %>
              <% end %>
            <% end %>
          <% end %>
        </div>
        <% if logged_in? %>
          <% if current_user.own?(@team) %>
            <div class="card-actions justify-end">
              <%= link_to "https://twitter.com/intent/tweet?url=#{ request.url }&text=#{@team.title}！森林を増やして一緒に絶滅危惧種を救おう！%0A&hashtags=やる気の森&hashtags=やるもり&hashtags=yarukimorimori",class: "btn btn-primary", target: '_blank' do %>
                <%= image_tag ("logo-black.png"), size: "20x20" %>シェア！
              <% end %>
              <%= button_to t('defaults.edit'), edit_team_path(@team), method: :get, class: 'btn btn-secondary' %>
              <%= button_to t('defaults.destroy'),
                            team_path(@team), 
                            method: :delete, data: { turbo_confirm: '削除しますか？チームメンバーの学習記録も削除されます。' },  
                            class: 'btn btn-info' %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="card w-96 h-auto bg-base-200 text-primary-content shadow-xl my-12">
      <div class="card-body">
        <h2 class="card-title">仲間たち</h2>
        <ul class="list-unstyled">
          <%= render partial: 'teams/attendee', collection: @team.attendees %>
       </ul>
      </div>
    </div>
  </div>
</div>
